(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function l(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=l(n);fetch(n.href,o)}})();(function(){const v="Вы уверены что хотите очистить таблицу?",i='<option value="">-- Выберите город --</option>',l="AddedCitiesAndCountryData",s=[{value:"russia",label:"Россия"},{value:"poland",label:"Польша"},{value:"kazakhstan",label:"Казахстан"},{value:"georgia",label:"Грузия"}],n=[{value:"sankt-petersburg",label:"Санкт-Петербург",country:"russia"},{value:"samara",label:"Самара",country:"russia"},{value:"perm",label:"Пермь",country:"russia"},{value:"novosibirsk",label:"Новосибирск",country:"russia"},{value:"omsk",label:"Омск",country:"russia"},{value:"ekaterinburg",label:"Екатеринбург",country:"russia"},{value:"varshava",label:"Варшава",country:"poland"},{value:"krakov",label:"Краков",country:"poland"},{value:"lodz",label:"Лодзь",country:"poland"},{value:"vroclav",label:"Вроцлав",country:"poland"},{value:"astana",label:"Астана",country:"kazakhstan"},{value:"almaty",label:"Алматы",country:"kazakhstan"},{value:"taraz",label:"Тараз",country:"kazakhstan"},{value:"temir",label:"Темир",country:"kazakhstan"},{value:"pavlodar",label:"Павлодар",country:"kazakhstan"}],o=Object.groupBy(n,e=>e.country),c=document.querySelector("#table"),L=document.querySelector("#form"),T=document.querySelector("#clear-table"),b=document.querySelector("#country-select"),d=document.querySelector("#city-select");function m(e){const t=s.find(a=>a.value===e.country),r=n.find(a=>a.value===e.city);return{country:t?.label||e.country,city:r?.label||e.city}}function w(e){return Array.isArray(e)?e.length&&typeof e?.[0]!="object"?(localStorage.removeItem(l),[]):e:(localStorage.removeItem(l),[])}function p(){const e=window.localStorage.getItem(l)||"[]",t=JSON.parse(e);return w(t)}function g(e){return e?new Date(e).toLocaleDateString():"---"}function D(e,t){const r=e.querySelector("tbody");if(!r)return;const a=(f,M)=>{const h=document.createElement("td");h.innerText=M,f.append(h)},u=document.createElement("tr"),y=m(t),H=e.querySelectorAll("tbody tr").length,z=[String(H+1),...Object.values(y),g(t?.date)];for(const f of z)a(u,f);r?.append(u)}function I(e,t){const r=e.querySelector("tbody");if(!r)return;const a=m(t),u=e.querySelectorAll("tbody tr").length,y=t?.date?g(t.date):"---";r.innerHTML+=`<tr>
      <td>${u+1}</td>
      <td>${a.country}</td>
      <td>${a.city}</td>
      <td>${y}</td>
    </tr>`}function k(e,t,r){if(typeof r!="function")throw new TypeError('Аргумент insertOneFn должен быть типа "Function"');for(const a of t)r(e,a)}function E(e){const r=[...p(),e];window.localStorage.setItem(l,JSON.stringify(r))}function S(e){if(!e)return;if(!Object.hasOwn(o,e)){d.innerHTML=i;return}const t=o[e];let r=i;for(const{value:a,label:u}of t)r+=`<option value="${a}">${u}</option>`;d.innerHTML=r,d.value=""}function O(e){e.preventDefault();const t=new FormData(this),r={country:String(t.get("country")??""),city:String(t.get("city")??""),date:String(t.get("date")??"")};D(c,r),E(r),this.reset()}function A(){window.confirm(v)&&(c.querySelector("tbody").innerHTML="",window.localStorage.removeItem(l))}function q(){const e=p();k(c,e,I)}function C(){this?.value&&S(this.value)}L?.addEventListener("submit",O),T?.addEventListener("click",A),b?.addEventListener("change",C),window.addEventListener("load",()=>{q(),S(b.value)})})();
