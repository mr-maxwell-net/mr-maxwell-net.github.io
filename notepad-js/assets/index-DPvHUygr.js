(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function f(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(o){if(o.ep)return;o.ep=!0;const t=f(o);fetch(o.href,t)}})();document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("notes-container"),i=document.getElementById("new-note"),f=document.getElementById("add-btn"),a=document.getElementById("search"),o=document.querySelectorAll(".filters button");let t=JSON.parse(localStorage.getItem("notes"))||[],s="all";function h(){d(),E()}function d(){r.innerHTML="",p().forEach((n,c)=>{const l=document.createElement("div");l.className=`note ${n.completed?"completed":""}`,l.innerHTML=`
      <input type="checkbox" class="checkbox" ${n.completed?"checked":""} data-index="${c}">
      <div class="note-content">${n.text}</div>
      <button class="delete-btn" data-index="${c}">✕</button>
      `,r.appendChild(l)})}function p(){return t.filter(e=>s==="active"?!e.completed:s==="completed"?e.completed:!0)}function L(){const e=a.value.toLowerCase();if(!e)return d();const n=p().filter(c=>c.text.toLowerCase().includes(e));r.innerHTML="",n.forEach((c,l)=>{const m=document.createElement("div");m.className=`note ${c.completed?"completed":""}`,m.innerHTML=`
      <input type="checkbox" class="checkbox" ${c.completed?"checked":""} data-index="${l}">
      <div class="note-content">${c.text}${v(c.text,e)}</div>
      <button class="delete-btn" data-index="${l}">✕</button>
        `,r.appendChild(m)})}function v(e,n){const c=new RegExp(`(${n})`,"gi");return e.replace(c,"<mark>$1</mark>")}function u(){localStorage.setItem("notes",JSON.stringify(t))}function E(){f.addEventListener("click",g),i.addEventListener("keypress",e=>{e.key==="Enter"&&g()}),a.addEventListener("input",L),o.forEach(e=>{e.addEventListener("click",()=>{o.forEach(n=>n.classList.remove("active")),e.classList.add("active"),s=e.dataset.filter,d()})}),r.addEventListener("click",e=>{if(e.target.classList.contains("delete-btn")){if(!window.confirm("Удалить заметку?"))return;const n=e.target.dataset.index;x(n)}if(e.target.classList.contains("checkbox")){const n=e.target.dataset.index;y(n)}}),r.addEventListener("dblclick",e=>{if(e.target.classList.contains("note-content")){const n=[...r.children].indexOf(e.target.closest(".note"));N(n)}})}function g(){const e=i.value.trim();e&&(t.push({text:e,completed:!1,createdAt:new Date().toISOString()}),i.value="",u(),d())}function x(e){t.splice(e,1),u(),d()}function y(e){t[e].completed=!t[e].completed,u(),d()}function N(e){const n=prompt("Редактировать заметку",t[e].text);n!==null&&n.trim()!==""&&(t[e].text=n.trim(),u(),d())}h()});
